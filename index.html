<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Valentine ğŸ’–</title>

<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{
  height:100%;
  background:#0b0412;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
  overflow:hidden;
}

.screen{
  position:fixed; inset:0;
  display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  text-align:center; padding:28px;
  transition:.45s ease;
  z-index:10;
}
.hidden{opacity:0;pointer-events:none;transform:scale(.98)}

#intro{
  background:linear-gradient(135deg,#fff0f5,#ffe6ef,#ffd6e8);
}

.name{
  font-family:'Pacifico',cursive;
  font-size:clamp(36px,6vw,64px);
  color:#d81b60;
}
.question{
  font-family:'Pacifico',cursive;
  font-size:clamp(20px,4vw,30px);
  color:#b0124a;
  margin:16px 0;
}

.buttons{display:flex;gap:16px}
button{
  padding:12px 30px;
  border-radius:999px;
  border:none;
  font-weight:700;
  cursor:pointer;
  font-size:1rem;
}
.yes{background:linear-gradient(135deg,#ff7aa2,#ff3d81);color:#fff}
.no{background:#fff;color:#333}

/* floating hearts */
.floating-heart{
  position:fixed;
  pointer-events:none;
  opacity:0;
  animation:heartFloat 5.5s ease forwards;
}
@keyframes heartFloat{
  0%{opacity:0;transform:translateY(30px)}
  20%{opacity:1}
  100%{opacity:0;transform:translateY(-90px)}
}

/* RESULT */
#result{
  background:#0b0412;
  color:#fff;
}
.result-layer{z-index:20;position:relative}
.result-title{
  font-family:'Pacifico',cursive;
  font-size:clamp(36px,7vw,68px);
  color:#ff5e9d;
}
.result-sub{
  font-family:'Pacifico',cursive;
  font-size:clamp(18px,3.5vw,28px);
  color:#ffd6e8;
}
#photo{
  width:min(85vw,520px);
  border-radius:16px;
  margin:18px 0;
  box-shadow:0 20px 60px rgba(0,0,0,.6);
}

/* GAME */
#heartGame{position:absolute; inset:0; z-index:15}
#heartHUD{
  position:absolute; top:16px; left:50%;
  transform:translateX(-50%);
  font-family:'Pacifico',cursive;
  color:#ffd6e8; font-size:22px;
}
.catch-heart{
  position:absolute;
  font-size:32px;
  cursor:pointer;
  animation:floatUp 4s ease forwards;
}
@keyframes floatUp{
  0%{opacity:0;transform:translateY(40px)}
  20%{opacity:1}
  100%{opacity:0;transform:translateY(-140px)}
}
.score-pop{animation:pop .35s ease}
@keyframes pop{
  0%{transform:scale(1)}
  50%{transform:scale(1.4)}
  100%{transform:scale(1)}
}
</style>
</head>

<body>

<audio id="music" src="make-you-mine.mp3" preload="auto" loop></audio>

<!-- INTRO -->
<div id="intro" class="screen">
  <h1 class="name">â¤ï¸ Mea â¤ï¸</h1>
  <h2 class="question">Will you be my Valentine? ğŸ’–</h2>
  <div class="buttons">
    <button class="yes" id="yesBtn">Yes! ğŸ’•</button>
    <button class="no" id="noBtn">No ğŸ’”</button>
  </div>
</div>

<!-- RESULT -->
<div id="result" class="screen hidden">
  <div id="heartGame">
    <div id="heartHUD">ğŸ’– Love: <span id="score">0</span></div>
  </div>

  <div class="result-layer">
    <div class="result-title">ğŸ’– GREAT CHOICE ğŸ’–</div>
    <div class="result-sub">I knew you loved me ğŸ˜˜</div>
    <img id="photo" src="https://media.giphy.com/media/ch6BQvE0MWlB6/giphy.gif">
    <div class="result-sub">I Love You â¤ï¸</div>
  </div>
</div>

<script>
/* ---------------- HELPERS ---------------- */
const rand=(a,b)=>a+Math.random()*(b-a);

/* ---------------- DOM REFS (CRITICAL) ---------------- */
const yesBtn = document.getElementById("yesBtn");
const noBtn  = document.getElementById("noBtn");
const intro  = document.getElementById("intro");
const result = document.getElementById("result");
const music  = document.getElementById("music");

/* ---------------- FLOATING HEARTS ---------------- */
const introHearts = setInterval(()=>{
  const h=document.createElement("div");
  h.className="floating-heart";
  h.textContent="ğŸ’–";
  h.style.left=rand(5,95)+"vw";
  h.style.top=rand(30,70)+"vh";
  h.style.fontSize=rand(14,26)+"px";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),6000);
},700);

/* ---------------- YES CLICK ---------------- */
yesBtn.addEventListener("click", yesClick);

function yesClick(){
  clearInterval(introHearts);

  try{
    music.volume=0;
    music.play();
    let v=0;
    const iv=setInterval(()=>{
      v+=0.05;
      music.volume=v;
      if(v>=0.8) clearInterval(iv);
    },80);
  }catch(e){}

  intro.classList.add("hidden");
  setTimeout(()=>{
    result.classList.remove("hidden");
    startCatchGame();
  },300);
}

/* ---------------- NO BUTTON (12 STEPS) ---------------- */
const noMessages=[
 "Wait... are you sure ? ğŸ¥º",
 "Really?",
 "Try Again!",
 "You sure?",
 "Haha nice try!",
 "No escape!",
 "Nice try ğŸ˜œ",
 "You can't escape my love ğŸ’˜",
 "Still no? ğŸ˜‚",
 "You're testing me ğŸ¥²",
 "Nope, not happening ğŸ™…ğŸ»"
];
let noClicks=0;

function handleNo(){
  if(noClicks<noMessages.length){
    noBtn.textContent=noMessages[noClicks++];
    noBtn.style.position="fixed";
    noBtn.style.left=rand(10,80)+"vw";
    noBtn.style.top=rand(20,70)+"vh";
  }else{
    noBtn.textContent="Yes! ğŸ’•";
    noBtn.className="yes";
    noBtn.style.position="static";
    noBtn.removeEventListener("click",handleNo);
    noBtn.addEventListener("click",yesClick);
  }
}
noBtn.addEventListener("click",handleNo);

/* ---------------- GAME ---------------- */
function startCatchGame(){
  const wrap=document.getElementById("heartGame");
  const scoreEl=document.getElementById("score");
  let score=0;

  const spawn=setInterval(()=>{
    if(score>=5){clearInterval(spawn);wrap.remove();return;}
    const h=document.createElement("div");
    h.className="catch-heart";
    h.textContent="ğŸ’–";
    h.style.left=rand(10,80)+"vw";
    h.style.top=rand(55,80)+"vh";

    h.onclick=e=>{
      if(navigator.vibrate) navigator.vibrate(30);
      score++;
      scoreEl.textContent=score;
      scoreEl.classList.add("score-pop");
      setTimeout(()=>scoreEl.classList.remove("score-pop"),300);
      h.remove();
    };
    wrap.appendChild(h);
    setTimeout(()=>h.remove(),4500);
  },900);
}
</script>

</body>
</html>
