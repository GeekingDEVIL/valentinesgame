<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Valentine üíñ</title>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<style>
/* ---------- Base & Layout ---------- */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;background:#0b0412;font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;overflow:hidden}
.anim-canvas{position:absolute;inset:0;pointer-events:none;display:block}
#fireworks{z-index:2}
#confetti{z-index:3}
#petals{position:absolute;inset:0;pointer-events:none;z-index:4;overflow:hidden}

.screen{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:28px;text-align:center;transition:.45s ease;z-index:10}
.hidden{opacity:0;pointer-events:none;transform:scale(.98)}
#intro{background:linear-gradient(135deg,#fff0f5,#ffe6ef,#ffd6e8)}

.name{font-family:'Pacifico',cursive;font-size:clamp(36px,6vw,64px);color:#d81b60;margin-bottom:8px;text-shadow:0 0 18px rgba(255,105,180,.45)}
.question{font-family:'Pacifico',cursive;font-size:clamp(18px,3.2vw,30px);color:#b0124a;margin-bottom:18px}
.buttons{display:flex;gap:16px}
button{padding:12px 30px;border-radius:999px;border:none;font-weight:700;cursor:pointer;font-size:1rem}
.yes{background:linear-gradient(135deg,#ff7aa2,#ff3d81);color:#fff}
.no{background:#fff;color:#333}

/* floating hearts intro */
.floating-heart{position:fixed;z-index:11;font-size:18px;pointer-events:none;opacity:0}
@keyframes heartFloat{
0%{opacity:0;transform:translateY(18px) scale(.94)}
20%{opacity:1}
80%{opacity:1}
100%{opacity:0;transform:translateY(-48px) scale(1.06)}
}

/* result */
#result{background:#0b0412;color:#fff;overflow:hidden}
.result-layer{position:relative;z-index:20}
.result-title{font-family:'Pacifico',cursive;font-size:clamp(36px,8vw,68px);color:#ff5e9d;white-space:nowrap}
.result-sub{color:#ffd6e8;margin-top:8px;font-family:'Pacifico',cursive;font-size:clamp(18px,3.2vw,28px)}
#photo{width:min(86vw,520px);border-radius:14px;margin:18px 0}

/* ---------- üîπ GAME ADDITION (styles only) ---------- */
#heartGame{
  position:absolute; inset:0; z-index:15;
  pointer-events:auto;
}
#heartHUD{
  position:absolute; top:16px; left:50%;
  transform:translateX(-50%);
  font-family:'Pacifico',cursive;
  color:#ffd6e8; font-size:22px;
  display:flex; gap:18px;
}
.catch-heart{
  position:absolute;
  font-size:32px;
  cursor:pointer;
  animation:floatUp 4s ease forwards;
}
@keyframes floatUp{
  0%{opacity:0;transform:translateY(40px)}
  20%{opacity:1}
  100%{opacity:0;transform:translateY(-140px)}
}
.combo-pop{
  animation:comboPop .35s ease;
}
@keyframes comboPop{
  0%{transform:scale(1)}
  50%{transform:scale(1.5)}
  100%{transform:scale(1)}
}
</style>
</head>
<body>

<audio id="music" src="make-you-mine.mp3" preload="auto" loop></audio>

<!-- INTRO -->
<div id="intro" class="screen">
  <h1 class="name">‚ù§Ô∏è Mea ‚ù§Ô∏è</h1>
  <h2 class="question">Will you be my Valentine? üíñ</h2>
  <div class="buttons">
    <button class="yes" id="yesBtn">Yes! üíï</button>
    <button class="no" id="noBtn">No üíî</button>
  </div>
</div>

<!-- RESULT -->
<div id="result" class="screen hidden">
  <canvas id="fireworks" class="anim-canvas"></canvas>
  <canvas id="confetti" class="anim-canvas"></canvas>
  <div id="petals"></div>

  <!-- üîπ GAME ADDITION -->
  <div id="heartGame">
    <div id="heartHUD">
      <div>üíñ <span id="score">0</span></div>
      <div>üî• x<span id="combo">1</span></div>
    </div>
  </div>

  <div class="result-layer">
    <div class="result-title">üíñ GREAT CHOICE üíñ</div>
    <div class="result-sub">I knew you loved me üòò</div>
    <img id="photo" src="https://media.giphy.com/media/ch6BQvE0MWlB6/giphy.gif">
    <div class="result-sub">I Love You ‚ù§Ô∏è</div>
  </div>
</div>

<script>
/* helpers */
const rand=(a,b)=>a+Math.random()*(b-a);

/* intro hearts */
setInterval(()=>{
  const h=document.createElement('div');
  h.className='floating-heart';
  h.textContent='üíñ';
  h.style.left=rand(5,95)+'vw';
  h.style.top=rand(25,70)+'vh';
  h.style.animation=`heartFloat ${rand(4.5,7)}s ease forwards`;
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),8000);
},600);

/* yes click */
yesBtn.onclick=()=>{
  music.volume=0; music.play();
  let v=0; const iv=setInterval(()=>{v+=.05;music.volume=v;if(v>=.75)clearInterval(iv)},80);
  intro.classList.add('hidden');
  setTimeout(()=>{
    result.classList.remove('hidden');
    startCatchGame();   // üîπ game starts here
  },260);
};

/* ---------- üîπ GAME ADDITION (logic) ---------- */
function startCatchGame(){
  const wrap=document.getElementById('heartGame');
  const scoreEl=document.getElementById('score');
  const comboEl=document.getElementById('combo');

  let score=0, combo=1, lastHit=0, TARGET=8;

  function spawn(){
    if(score>=TARGET){ wrap.remove(); return; }

    const h=document.createElement('div');
    h.className='catch-heart';
    h.textContent='üíñ';
    h.style.left=rand(10,80)+'vw';
    h.style.top=rand(55,80)+'vh';

    h.onclick=()=>{
      const now=Date.now();
      combo = (now-lastHit<1200)? combo+1 : 1;
      lastHit=now;

      score += combo;
      scoreEl.textContent=score;
      comboEl.textContent=combo;
      comboEl.classList.add('combo-pop');
      setTimeout(()=>comboEl.classList.remove('combo-pop'),300);

      if(navigator.vibrate) navigator.vibrate(30);
      h.remove();
    };
    wrap.appendChild(h);
    setTimeout(()=>h.remove(),4500);
  }
  const si=setInterval(spawn,850);
  setTimeout(()=>{clearInterval(si);wrap.remove();},15000);
}
</script>
</body>
</html>
